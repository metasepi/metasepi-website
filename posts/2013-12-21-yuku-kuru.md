---
title: めたせぴ2013☆ゆく年くる年
description: めたせぴ☆の今年一年を振り返って、来年の願望や妄想をするでゲソー
tags: haskell, ajhc, project
---

今年はワシにとって激動の年だったでゲソ。
Metasepiプロジェクトが本格的に稼動して、
[Ajhc Haskellコンパイラ](http://ajhc.metasepi.org/)
という最初の製品を出荷できたでゲソ。

今年一年を振り返って、ついでに来年の願望や妄想をしてみなイカ？
また何をするのにどれぐらい工数がかかったのか覚えておくと後で役に立つかもしれないでゲソ。

## 2012年12月

この少し前に何をしていたかというとGHCのランタイムの調査をしていたんじゃなイカ。
つまり[C83 λカ娘](http://www.paraiso-lang.org/ikmsm/books/c83.html)の記事の執筆でゲソ。
この調査の中でワシは組み込みドメインへのGHCの応用に深く絶望したんでゲソ。。。
当時のワシの頭の中には関数型言語と言えばHaskellで、その処理系はGHCしか読んだことがなかったのでゲソ。
型推論を持つ言語のランタイムがGHCの様なありさまでは、POSIXの外に出ることは不可能、、、
と思っていたとき偶然試した
[Jhc Haskell Compiler](http://repetae.net/computer/jhc/)
がとても小さなランタイムを持つことを知ったのでゲソ。
これはいいじゃなイカ! とC83にはその希望だけにおわせておいたでゲソ。

と、C83の記事が完成したその夜、突然
[めたせぴ☆ふぁうんでーしょんの序章](http://www.paraiso-lang.org/ikmsm/books/c84-sample.pdf)
の文章が舞い降りたんでゲソ。

~~~
$ pwd
/home/kiwamu/doc/IKMSM/C84
$ git log -p
--snip--
commit 7e43651b93631caa192bb7097126f9ce4735f060
Author: Kiwamu Okabe <kiwamu@debian.or.jp>
Date:   Mon Dec 24 18:37:54 2012 +0900

    About metasepi.
~~~

すぐに記事の序章と結末だけ書いて、その間の文章を埋めるべくMetasepiの開発はスタートしたんでゲソ。
まさしく"同人誌 - ドリブン - デベロップメント (DDD)"じゃなイカ!

_やったことリスト_

* [C84 λカ娘](http://www.paraiso-lang.org/ikmsm/books/c84.html) の原稿作成開始
* jhcのソースコード読み開始
* [NetBSD bootloaderの一部をHaskell化](https://gitorious.org/metasepi/netbsd-arafura/activities)できた

## 2013年1月

ひたすらjhcをコネコネしているとなんとなくソースコードツリーの中身が見えてきたのがこの頃でゲソ。
ドキュメントを全く読まずにこれ以上ソースを読んでも身にならないと気がついて
[@dif_engine](https://twitter.com/dif_engine)さんに協力してもらって
[Jhc User's Manual](http://repetae.net/computer/jhc/manual.html)
を日本語訳したでゲソ。
はっきり言ってこのドキュメントはコンパイラの利用者が読むものではなかったでゲソ!
後半にいくと型システムの説明になり、今でもワシは完全には理解できていないでゲソ。。。
この日本語訳は今では
[Ajhcのホームページの中に置かれている](http://ajhc.metasepi.org/manual_ja.html)
でゲソ。

また、このころ「Haskell言語で少しずつC言語の設計を置換する」という設計手法を思いつくでゲソ。
もちろん、OSの書かれたC言語のソースコードをHaskellで設計置換するのに少しずつでうまくいく訳がないのでゲソ。
最も大きな問題はほとんどのコンパイラがコンパイラの利用者が意図しても再入可能かコードを吐き出せない、つまり割込みハンドラをHaskellによって記述できないからじゃなイカ。
しかしとにかくここではjhcを成長させて再入可能にすることでC言語の設計置換に使えるコンパイラに仕立て上げようということになったのでゲソ。
これ以降、この設計置換の手法を"スナッチ"と呼び、Ajhcを使ったスナッチをNetBSDに対して適用するデザインを"Arafura"と呼ばれることになるでゲソ。
Arafuraを実現するためのjhcの拡張、つまりarafura-jhcという名前にその後変遷することになるでゲソ。

_やったことリスト_

* [Arafuraイテレーション](http://metasepi.org/posts/2013-01-09-design_arafura.html)開始
* [jhcユーザーズマニュアル日本語訳](http://metasepi.org/posts/2013-01-12-jhc_manual_ja.html)

## 2013年2月

この頃はフラストーレションがたまっていたでゲソ。
Metasepiプロジェクトに関する説明会を開催したはよかったのでゲソが、
その効果はほとんどなかったと言っても良いでゲソ。

しかし、そもそも他人に期待するのは間違っていたのでゲソ。
そもそも何に使えるかもわからない、絵空事しか見えてこない、コンパイラとOSに興味を持つ訳がないのでゲソ。
そこでこの月以降はメモリが数百kB程度しかないマイコンをターゲットにしてデモをひたすら作成することにしたでゲソ。
理由は xxx

またこの頃
[@dec9ue](https://twitter.com/dec9ue)
さんがjhcのGCを調査してくれて、後々楽ができたでゲソ!

_やったことリスト_

* [秘密結社Metasepi作戦会議 第1回](http://metasepi.org/posts/2013-02-03-kickoff_meeting.html)開催
* [STBee Miniマイコンデモ](https://github.com/ajhc/demo-cortex-m3)作成

## 2013年3月

_やったことリスト_

* jhcをforkしてAjhcリポジトリを作った
* Ajhc 0.8.0.1, [0.8.0.2](http://www.haskell.org/pipermail/jhc/2013-March/001028.html) リリース
* Ajhcをcabalで管理しようと思いたつ
* [マイコン用モールス信号アプリ](https://github.com/ajhc/demo-cortex-m3/blob/master/stm32f3-discovery/hs_src/MainMorseCode.hs)作成

## 2013年4月

_やったことリスト_

* [秘密結社Metasepi作戦会議 第2回](http://metasepi.org/posts/2013-04-22-travel_in_kyoto-u.html)開催
* Ajhc [0.8.0.3](http://www.haskell.org/pipermail/jhc/2013-April/001047.html), [0.8.0.4](https://github.com/ajhc/ajhc/blob/arafura/docs/announce_ajhc/announce-0.8.0.4.md) リリース
* [5ヶ年計画](http://metasepi.org/doc/20130508_5year_plan.pdf)を立てる

## 2013年5月

_やったことリスト_

## 2013年6月

_やったことリスト_

* Ajhc [0.8.0.5](http://www.haskell.org/pipermail/jhc/2013-June/001061.html), [0.8.0.6](http://www.haskell.org/pipermail/jhc/2013-June/001062.html) リリース

## 2013年7月

_やったことリスト_

* C84 λカ娘 の原稿が完成
* [ChibiOS/RT上のアプリをHaskellで](https://github.com/metasepi/chibios-arafura)書いてみようと思いたつ
* Ajhc [0.8.0.7](http://www.haskell.org/pipermail/jhc/2013-July/001063.html) リリース

## 2013年8月

_やったことリスト_

* [秘密結社Metasepi作戦会議 第3回](http://metasepi.org/posts/2013-08-04-osckansai2013.html)開催
* [mbedマイコンを使ったRSSリーダデモ](https://github.com/ajhc/demo-cortex-m3/tree/master/mbed-nxp-lpc1768)作成開始

## 2013年9月

_やったことリスト_

* [秘密結社Metasepi作戦会議 第4回](http://metasepi.org/posts/2013-09-16-osc2013-do.html)開催
* [mbedマイコンを使ったRSSリーダデモ](https://github.com/ajhc/demo-cortex-m3/tree/master/mbed-nxp-lpc1768)作成完成
* Ajhc [0.8.0.8](http://www.haskell.org/pipermail/jhc/2013-September/001065.html) リリース

## 2013年10月

_やったことリスト_

* [秘密結社Metasepi作戦会議 第5回](http://metasepi.org/posts/2013-10-06-osc2013-hi.html)開催
* [秘密結社Metasepi作戦会議 第6回](http://metasepi.org/posts/2013-10-20-osc2013-tokyo.html)開催
* Ajhc [0.8.0.9](http://www.haskell.org/pipermail/jhc/2013-October/001069.html) リリース

## 2013年11月

_やったことリスト_

* [秘密結社Metasepi作戦会議 第7回](http://metasepi.org/posts/2013-11-10-kof2013.html)
* [秘密結社Metasepi作戦会議 第8回](http://metasepi.org/posts/2013-11-24-osc-fukuoka-oita.html)
* ChibiOS/RT上で[forkOS](http://hackage.haskell.org/package/base-4.6.0.1/docs/Control-Concurrent.html#v:forkOS)を使ったスレッドが動作するようになる

## 2013年12月

_やったことリスト_

* [C85 λカ娘](http://www.paraiso-lang.org/ikmsm/books/c85.html) の原稿完成

## 2014年はどんな年？

さぁ、、、未来のことはわからないじゃなイカ。
